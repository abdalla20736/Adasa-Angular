<main>
  <section class="blog-details hero py-5">
    <div class="w-100">
      <div class="header-img position-relative">
        <img
          class="position-absolute object-fit-cover w-100 h-100"
          [src]="post.image"
          [alt]="post.title"
        />
        <div class="img-shadow position-absolute top-0 start-0 end-0 bottom-0"></div>

        <div class="pt-5 pb-2 px-5 z-3 position-relative d-flex align-items-center w-auto">
          <div class="navigation rounded-4 py-2 px-3 gap-2 d-flex align-items-center">
            <a routerLink="/">
              <i class="fa-solid fa-home fs-14px"></i>
            </a>
            <i class="fa-solid fa-angle-left fs-14px"></i>
            <a routerLink="/blog">
              <span class="fs-14px">المدونة</span>
            </a>
            <i class="fa-solid fa-angle-left fs-14px"></i>
            <span class="fs-14px text-orange-400">{{ post.category }}</span>
          </div>
        </div>
        <div class="container">
          <div class="card-info z-3 position-relative">
            <div class="d-flex gap-2 align-items-center mb-3">
              <a routerLink="/blog" [queryParams]="{ category: post.category }">
                <div class="badge-blog-info">
                  <span>{{ post.category }}</span>
                </div>
              </a>

              <span class="text-neutral-400 fs-14px">
                <i class="fa-regular fa-calendar text-neutral-400 fs-12px"></i>
                {{ post.date | date: 'dd MMMM yyyy' : '' : 'ar' }}</span
              >
              <span class="badge-time-to-read text-neutral-400 fs-14px">
                <i class="fa-regular fa-clock text-neutral-400 fs-14px"></i>
                {{ post.readTime }}
              </span>
            </div>
            <h2 class="header-title-2 mb-3" [textContent]="post.title"></h2>

            <div
              class="author-info d-flex justify-content-between align-items-center gap-3 p-3 rounded-4"
            >
              <div class="d-flex align-items-center gap-2">
                <div class="blog-avatar-img">
                  <img [src]="post.author.avatar" class="rounded-circle w-100 h-100" alt="" />
                </div>

                <div class="author">
                  <p class="mb-0 fw-bold fs-14px" [textContent]="post.author.name"></p>
                  <span class="text-neutral-500"> {{ post.author.role }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="container-fluid container-lg px-0">
        <div class="row mx-0 gap-lg-5 w-100 px-lg-0 flex-lg-nowrap">
          <div class="menu col-lg-4 all-menu order-lg-1 px-0">
            <div class="position-sticky d-flex flex-column gap-3">
              <div class="side-menu rounded-4">
                <div class="d-flex align-items-center gap-3 mb-4">
                  <div
                    class="side-menu-icon d-flex justify-content-center align-items-center rounded-3"
                  >
                    <i class="fa-solid fa-list text-orange-500"></i>
                  </div>
                  <h3 class="fs-6 text-white">محتويات المقال</h3>
                </div>
                <div>
                  <button class="navigation-btn d-flex align-items-center gap-3 rounded-3">
                    <div class="menu-icon icon-24 d-flex align-items-center justify-content-center">
                      <span class="text-neutral-400">1</span>
                    </div>
                    <p class="mb-0 text-neutral-400 fs-14px">لماذا الساعة الذهبية؟</p>
                  </button>
                  <button class="navigation-btn d-flex align-items-center gap-3 rounded-3">
                    <div class="menu-icon icon-24 d-flex align-items-center justify-content-center">
                      <span class="text-neutral-400">2</span>
                    </div>
                    <p class="mb-0 text-neutral-400 fs-14px">التحضير المسبق</p>
                  </button>
                  <button class="navigation-btn d-flex align-items-center gap-3 rounded-3">
                    <div class="menu-icon icon-24 d-flex align-items-center justify-content-center">
                      <span class="text-neutral-400">3</span>
                    </div>
                    <p class="mb-0 text-neutral-400 fs-14px">إعدادات الكاميرا</p>
                  </button>
                  <button class="navigation-btn d-flex align-items-center gap-3 rounded-3">
                    <div class="menu-icon icon-24 d-flex align-items-center justify-content-center">
                      <span class="text-neutral-400">4</span>
                    </div>
                    <p class="mb-0 text-neutral-400 fs-14px">التكوين الفني</p>
                  </button>
                  <button class="navigation-btn d-flex align-items-center gap-3 rounded-3">
                    <div class="menu-icon icon-24 d-flex align-items-center justify-content-center">
                      <span class="text-neutral-400">5</span>
                    </div>
                    <p class="mb-0 text-neutral-400 fs-14px">الخلاصة</p>
                  </button>
                </div>
              </div>
              <div
                class="side-menu rounded-4 d-flex align-items-center gap-3 justify-content-center"
              >
                <div
                  class="blog-info d-flex align-items-center p-3 justify-content-center flex-column rounded-4 h-100"
                >
                  <i class="fa-regular fa-clock text-orange-500 fs-18px mb-2"></i>
                  <p class="mb-0 text-center fw-bold">{{ post.readTime }}</p>
                  <span class="fs-12px text-neutral-500">وقت القراءة</span>
                </div>
                <div
                  class="blog-info d-flex align-items-center p-3 justify-content-start flex-column rounded-4 align-self-stretch"
                >
                  <i class="fa-regular fa-calendar text-orange-500 fs-18px mb-2"></i>
                  <p class="mb-0 fs-14px fw-bold">{{ post.date | date: 'dd MMMM' : '' : 'ar' }}</p>
                  <span class="fs-12px text-neutral-500">تاريخ النشر</span>
                </div>
              </div>
              <div
                class="side-menu dont-miss-menu rounded-4 d-flex align-items-center gap-2 justify-content-center flex-column"
              >
                <div
                  class="dont-miss-icon align-items-center rounded-4 d-flex justify-content-center mb-2"
                >
                  <i class="fs-5 fa-solid fa-envelope text-orange-500"></i>
                </div>
                <h3 class="fs-6 fw-bold">لا تفوّت جديدنا</h3>
                <p class="mb-0 text-neutral-500 fs-14px">اشترك للحصول على أحدث المقالات</p>
                <a routerLink="/blog" class="btn-primary w-100 rounded-4">تصفح المزيد</a>
              </div>
            </div>
          </div>
          <div class="col-lg-8 px-4 mx-0 mt-5 mt-lg-0">
            <div class="notification">
              <p class="mb-0 text-neutral-200 fs-18px fst-italic">"{{ post.excerpt }}"</p>
            </div>
            <div>
              <p class="mb-0 text-neutral-300 fs-18px">
                {{ post.content.split('##')[0] }}
              </p>
            </div>
            <div>
              @for (section of sections; track $index) {
                <app-article-content
                  [title]="section.title"
                  [paragraph]="section.paragraph"
                ></app-article-content>
              }
            </div>
            <div class="card-blog rounded-4 mb-4 mt-5">
              <div>
                <div class="d-flex align-items-center gap-2">
                  <div
                    class="card-icon rounded-3 d-flex align-items-center justify-content-center gap-2"
                  >
                    <i class="fa-solid text-orange-500 fa-tags fs-5"></i>
                  </div>
                  <h3 class="fs-6 fw-bold mb-0">الوسوم</h3>
                </div>
                <div class="d-flex align-items-center gap-2 mt-3">
                  @for (tag of post.tags; track $index) {
                    <span class="py-2 px-3 tag text-neutral-400 rounded-4">#{{ tag }}</span>
                  }
                </div>
              </div>
            </div>
            <div class="card-blog rounded-4 mb-4">
              <div class="d-flex align-items-center justify-content-between">
                <div class="d-flex align-items-center gap-2">
                  <div
                    class="card-icon rounded-3 d-flex align-items-center justify-content-center gap-2"
                  >
                    <i class="fa-solid text-orange-500 fa-share-nodes fs-5"></i>
                  </div>
                  <h3 class="fs-6 fw-bold mb-0">شارك المقال</h3>
                </div>
                <div class="d-flex align-items-center gap-2 mt-3">
                  <a
                    class="d-flex align-items-center justify-content-center rounded-3 contact-link x-twitter"
                  >
                    <i class="fa-brands fa-x-twitter text-neutral-400"></i>
                  </a>
                  <a
                    class="d-flex align-items-center justify-content-center rounded-3 contact-link linkedin"
                  >
                    <i class="fa-brands fa-github text-neutral-400"></i>
                  </a>
                  <a
                    class="d-flex align-items-center justify-content-center rounded-3 contact-link whatsapp"
                  >
                    <i class="fa-brands fa-whatsapp text-neutral-400"></i>
                  </a>
                  <a
                    class="d-flex align-items-center justify-content-center rounded-3 contact-link link"
                  >
                    <i class="fa-solid fa-link text-neutral-400"></i>
                  </a>
                </div>
              </div>
            </div>
            <div class="card-blog rounded-4 mb-4 d-flex gap-3 flex-row">
              <div class="avatar-img rounded-4">
                <img class="w-100 h-100 rounded-4" [src]="post.author.avatar" alt="" />
              </div>
              <div>
                <span class="text-orange-500 fs-12px fw-semibold text-uppercase">كاتب المقال</span>
                <h3 class="fs-5 text-white fw-bold">{{ post.author.name }}</h3>
                <p class="text-neutral-500 fs-14px mb-2">{{ post.author.role }}</p>
                <p class="mb-0 text-neutral-400 fs-14px">
                  مصور محترف شغوف بمشاركة المعرفة والخبرات في عالم التصوير الفوتوغرافي.
                </p>
              </div>
            </div>
          </div>
        </div>

        <div class="px-4">
          <div
            class="like-blog d-flex align-items-center gap-3 justify-content-between mb-5 pt-5 mt-5"
          >
            <div class="d-flex align-items-center gap-3">
              <div
                class="card-icon icon-resize d-flex align-items-center justify-content-center rounded-4"
              >
                <i class="fa-solid fa-images fs-5 text-orange-500"></i>
              </div>
              <div>
                <h2 class="fs-4 fw-bold text-white mb-0">مقالات قد تعجبك</h2>
                <p class="mb-0 fs-14px text-neutral-500">استكشف المزيد من المحتوى المميز</p>
              </div>
            </div>
            <a routerLink="/blog" class="text-orange-500 fw-bold latest-articles-link">
              عرض الكل
              <i class="fa-solid fa-arrow-left-long text-orange-500 fs-14px"></i>
            </a>
          </div>
          <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 mx-lg-1">
            @for (post of posts | slice: 1 : 4; track $index) {
              <div class="col">
                <a [routerLink]="['/blog', post.slug]">
                  <div
                    class="square-blog-card d-flex flex-column rounded-4 overflow-hidden mb-4 position-relative"
                  >
                    <div class="position-relative image-wrapper">
                      <div class="blog-img-overlay position-absolute"></div>
                      <div
                        class="blog-badge-card position-absolute d-flex align-items-center gap-1 z-3"
                      >
                        <span>{{ post.category }}</span>
                      </div>

                      <img
                        class="h-100 w-100 object-fit-cover card-banner d-block"
                        [src]="post.image"
                        alt=""
                      />
                    </div>
                    <div class="square-card-info">
                      <h2 class="fs-14px mb-3" [textContent]="post.title"></h2>

                      <div
                        class="author-info-card d-flex justify-content-between align-items-center gap-3"
                      >
                        <div class="d-flex align-items-center gap-2">
                          <div class="avatar-icon-card">
                            <img
                              [src]="post.author.avatar"
                              class="blog-avatar-icon rounded-circle w-100 h-100"
                              alt=""
                            />
                          </div>

                          <div class="author">
                            <span class="text-neutral-500 lh-1 fs-12px">
                              {{ post.author.name }}</span
                            >
                          </div>
                        </div>
                        <span class="badge-time-to-read text-neutral-500">
                          {{ post.readTime }}
                        </span>
                      </div>
                    </div>
                  </div>
                </a>
              </div>
            }
          </div>
        </div>
      </div>
    </div>
  </section>
</main>
